language: python

python:
- "3.6"

install:
  - pip install sphinx sphinx_rtd_theme
  - python setup.py install

script:
  # now do the docs
  - cd docs
  # Use Sphinx to make the html docs
  - make html
  # Tell GitHub not to use jekyll to compile the docs
  - touch _build/html/.nojekyll

# Tell Travis CI to copy the documentation to the gh-pages branch of
# your GitHub repository.
deploy:
  - provider: pypi
    user: wedavey
    distributions: sdist bdist_wheel
    password:
      secure: "MUoyqWVkzliFtUZsS/UmZudRx4e8vMYOfd9m0v3rO1K630RnwmdfI69z17W7GHo8a8/hTcNssL7siwxxYQnnnEhPF6+x7pCdg11gq7hJ2yDJ17d5lAh8oPpkgHg1We/i9IN1DIA7z4elhhja7LJMoilDUgssywHQrJ+gc/WouRiGA+U/KYw5nstYGGD1JkdMK7cqq4dpXEP5+Qr16mu+u3zCxcs3YM+bTe9E78ynJGj9G/NKnClrjcNfhhLPJbm32rtYQl387+7dAOQYwiWHL7F++QPELnBD3/ApFrEkgUdS7oH47yjqsXFiNzzaUQClFdM1xq+LfzfaPk5FFWVFU8oUzswKDGwMv1C4S8e8Pj8Lhk/PCad8iyYATEZfZoE4+I1fKoCo5GFFzx7iQPD3MgvNLS9dj2yEu8RB2LHqSFw2qsGZhlEQGMz1+w+tW8YK/y/IN8rukTl1Pfk/CzonrHDbWjyaxd6r8Dyq72+du13HP4xWkRCIxBZl+hPX4xiLo7Bz80i4/zzxbcwagniENukQbO9vGLn7ZeV1ghqv+9CW0NZSBEuGRyjNXRKTy/o2r5riZzGUMNh0a7LymKA2Bz4vU8twuDKQpek1jjHBkhMGywWJEumL1G6/n7hVkausmjB9SQRK0yHvJz74IupuaTHmLVhDAwIUXvFKLiikuhw="
    on:
      tags: true

  - provider: pages
    skip_cleanup: true
    github_token: $GH_TOKEN  # Set in travis-ci.org dashboard, marked secure
    keep-history: true
    on:
      tags: true
    local_dir: docs/_build/html/


# script based on https://amarder.github.io/using-travis-ci-to-build-sphinx-docs/