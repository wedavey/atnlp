language: python

python:
- "3.6"

install:
  - pip install sphinx sphinx_rtd_theme
  - python setup.py install

script:
  - cd docs
  # Use Sphinx to make the html docs
  - make html
  # Tell GitHub not to use jekyll to compile the docs
  - touch _build/html/.nojekyll
  # return to top dir
  - cd ..

# Tell Travis CI to copy the documentation to the gh-pages branch of
# your GitHub repository.
deploy:
  - provider: pypi
    user: wedavey
    #distributions: sdist bdist_wheel
    #skip_cleanup: true
    password:
      secure: "h+wDuct6GXZ2vSrDQ1w4SNKoArew+9wUpdnCgCxkaqhaEB+KLUyU6LYVX4ADnvZtaHeALq/0xs8DaU33AUJbh/M8VaFtya+PuDYr2HbQQLv++XqivSMdMTeq9YjETgtPiZCh+jfGuBH8SxGwfVRs6w6ZEWco0xePXjlI7cWFkXy/uvVZbENLJ+O01mx9NwM7J6XhOzxRqSvpFsLkz1fQIZ/67lGTkMQ1fYcTu1qOEh8tdsda5WQPIaEVnI08yLo91HlxrCdaZ31Tj9QiMYQBpwJK6xHmE/jqYs3J4OGnHfaFnY5f7wb77OecC6aX6gB7XqyARYh5POkVWLi0cI0boLRXsVnmaO/ZNL6pV+RqIVhwSf26DPPtysUvmZ5PZywTNy0rGVcTozU0+BRtqAmuV8YLI+CDZgON7iiIMNfxQ19ghvQGyBnUCgv+H0oMZvScBNTSsjjaDGNG5som8c3klWs76LPKsWqeS4iVuCsy+eE0wjazXGqZKo7ZUvFFnD9rKXuuMv4wiQpIoEqq0w8ofejN9iF/oLIs46IbTwIPHN+A3RhHnVHqzJVH6fVb961oURfOdCkeob6W7HhDRUB3zEwnfJMruNyTDY3ud/moqi6C/sJlyoVZmpQu2cgT2me/JUoF5L6852vBs2du5rsygmgMnq2XshbV+iT5ZDisKM0="
    on:
      all_branches: true
      #tags: true

  - provider: pages
    skip_cleanup: true
    github_token: $GH_TOKEN  # Set in travis-ci.org dashboard, marked secure
    keep-history: true
    on:
      tags: true
    local_dir: docs/_build/html/


# script based on https://amarder.github.io/using-travis-ci-to-build-sphinx-docs/