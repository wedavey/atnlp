language: python

python:
- "3.6"

install:
  - pip install sphinx sphinx_rtd_theme
  - python setup.py install

script:
  - cd docs
  # Use Sphinx to make the html docs
  - make html
  # Tell GitHub not to use jekyll to compile the docs
  - touch _build/html/.nojekyll
  # return to top dir
  - cd ..

# Tell Travis CI to copy the documentation to the gh-pages branch of
# your GitHub repository.
deploy:
  - provider: pypi
    user: wedavey
    #distributions: sdist bdist_wheel
    #skip_cleanup: true
    password:
      secure: "TfIs7fWa/r8dIIpHpT4HGtC5NV3PksDGyDpu7xsxfbsJYNIKhrbjzWaTr4fyiBgQ8x3n5Kg/IXoxJHUTn2ztZVrut6KW/wjFzh1FnyjbQbzySuw0O9nHYanTaMQnj2OIl3F6GLILAGgZjYTmi9PfcZX/F5HHtPwEdjxzgitxOmcyjBx80qMAHWU/ZY/tnng92zEKiTt4+p4Sl1GWh9T1F2mgcM610wnSnq+sox9GF89t+EyCOS0MVJqHP6OXqgfw0eSb06oIrHupet6ugi2MR/pB9FO1k2yPyRfZFCk2uKjWel8qBdzTDCU22aW6Jcdo5tpK6uEYTp2Q6Ox9vvZ3ZkR87Rgkh5TBOSB+6LO2j+u0VTE7IDqAF0dO/BryAA+JhGyaUpZBqdW8+AqjBcpazHbEfiqz+et/ochgyCm9P4Aua47niKrBEUMpMEndqAKogMZO0eAjq7VlXX39zcfafzUze31r9ef2cIi7lo21Rstge7WvrOGln3Om6LUl7z2yOjODbkYv9M9UmkYhFssG7YqOpi+CERCVUw98E/wG18UqtWwC6AKrNL6Eni/K/62nUo3B29KkBssPCO/qJiveO2IqkOZLgc5ubFGGHuwtc4xGpCeXjGNGqBrJ5emxZcDU3EARebTswRqE55fAog3qjK8oEmi9a03GtxAZfPKYG5g="
    on:
      all_branches: true
      #tags: true

  - provider: pages
    skip_cleanup: true
    github_token: $GH_TOKEN  # Set in travis-ci.org dashboard, marked secure
    keep-history: true
    on:
      tags: true
    local_dir: docs/_build/html/


# script based on https://amarder.github.io/using-travis-ci-to-build-sphinx-docs/